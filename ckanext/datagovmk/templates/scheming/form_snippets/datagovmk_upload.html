<!--
Copyright (c) 2018 Keitaro AB

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as
published by the Free Software Foundation, either version 3 of the
License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with this program.  If not, see <https://www.gnu.org/licenses/>.
-->

{% import 'macros/form.html' as form %}

{% set is_upload = data.image_url and not data.image_url.startswith('http') %}
{% set is_url = data.image_url and data.image_url.startswith('http') %}
{{ form.image_upload(
    data,
    errors,
    field_url=field.field_name,
    field_upload=field.upload_field,
    field_clear=field.upload_clear,
    is_upload_enabled=h.uploads_enabled(),
    is_url=is_url,
    is_upload=is_upload,
    upload_label=h.scheming_language_text(field.upload_label),
    url_label=h.scheming_language_text(field.label),
    placeholder=field.form_placeholder
    )
}}
{# image_upload macro doesn't support call #}
{%- snippet 'scheming/form_snippets/help_text.html', field=field -%}
