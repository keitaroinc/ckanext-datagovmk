{% import 'macros/form.html' as form %}

{%- set is_upload = (data.url_type == 'upload') -%}
{{ form.image_upload(data, errors, field_url='url', field_upload='upload', field_clear='clear_upload',
    is_upload_enabled=h.uploads_enabled(), is_url=data.url and not is_upload, is_upload=is_upload,
         upload_label=h.datagovmk_get_language_text(field.upload_label or preset.upload_label), 
         url_label=h.datagovmk_get_language_text(field.label or preset.label), 
         placeholder=field.form_placeholder or preset.field_placeholder, 
         field_name='name') }}
{# image_upload macro doesn't support call #}
{%- snippet 'datagovmk/form_snippets/help_text.html', field=field -%}