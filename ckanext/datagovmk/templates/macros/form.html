{% ckan_extends %}

{#
Builds a single toggle input.

name        - The name of the form parameter.
id          - The id to use on the input and label. Convention is to prefix with 'field-'.
label       - The human readable label.
value       - The value of the input.
checked     - If true the checkbox will be checked
error       - An error string for the field or just true to highlight the field.
classes     - An array of classes to apply to the form-group.
hint        - A human readable text for what the toggle is actually doing.
is_required - Boolean of whether this input is requred for the form to validate

Example:

{% import 'macros/form.html' as form %}
{{ form.toggle('I accept', checked=true) }}

#}
{% macro toggle(name, id='', label='', hint='', value='', checked=false, placeholder='', error="", classes=[], attrs={}, is_required=false) %}
{%- set extra_html = caller() if caller -%}
<div class="form-group{{ " " ~ classes | join(" ") }}{% if error %} error{% endif %}">
  <div class="toggle controls">
    <label for="{{ id or name }}">
      <div class="switch">
        <input id="{{ id or name }}" type="checkbox" name="{{ name }}" value="{{ value | empty_and_escape }}" {{ "checked " if checked }} {{ attributes(attrs) }} />
        {% if is_required %}{{ input_required() }}{% endif %}
        <span class="slider round"></span>
      </div>
      <span class="label-text">
        {{ label or name }}
      </span>
    </label>
    {% if hint %}
    <div class="help-block">
      <hr>
      <p>{{ hint }}</p>
    </div>
    {% endif %}
    {% if error and error is iterable %}<strong class="error-inline">{{ error|join(', ') }}</strong>{% endif %}
    {{ extra_html }}
  </div>
</div>
{% endmacro %}
